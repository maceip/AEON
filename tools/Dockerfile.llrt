# Dockerfile.llrt - Build minimal riscv64 Alpine rootfs with LLRT
#
# Usage:
#   docker buildx build --platform linux/riscv64 -f tools/Dockerfile.llrt -t friscy-llrt . --load
#   CID=$(docker create friscy-llrt) && docker export $CID > demos/medium/llrt-rootfs.tar && docker rm $CID

FROM --platform=linux/riscv64 alpine:edge

# Only ca-certificates (for TLS) and bash (for tool execution)
RUN apk add --no-cache ca-certificates bash

# Copy pre-built LLRT binary
COPY tmp-llrt-riscv64 /usr/local/bin/llrt
RUN chmod +x /usr/local/bin/llrt

# Copy LLRT-compatible REPL script
COPY runtime/claude-repl-llrt.js /usr/local/bin/claude-repl-llrt.js

CMD ["/bin/sh"]
